{"ast":null,"code":"var _jsxFileName = \"E:\\\\Competition\\\\Hackathon\\\\Fixpoint_javafest\\\\FixPoint\\\\frontend\\\\src\\\\pages\\\\ReportForm.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { toast } from 'react-toastify';\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\nimport L from 'leaflet';\nimport { MapPin, Upload, Save, Sparkles, Edit3 } from 'lucide-react';\nimport { reportService } from '../services/reportService';\n\n// Fix for default markers in react-leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst LocationPicker = ({\n  onLocationSelect,\n  initialPosition\n}) => {\n  _s();\n  const [position, setPosition] = useState(initialPosition);\n  const map = useMapEvents({\n    click(e) {\n      const newPosition = [e.latlng.lat, e.latlng.lng];\n      setPosition(newPosition);\n      onLocationSelect(e.latlng.lat, e.latlng.lng);\n    }\n  });\n  useEffect(() => {\n    if (position && map) {\n      map.setView(position, map.getZoom());\n    }\n  }, [position, map]);\n  return position ? /*#__PURE__*/_jsxDEV(Marker, {\n    position: position\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 21\n  }, this) : null;\n};\n_s(LocationPicker, \"LyP2sZNXS2T7lhPfL7HIw03IGSc=\", false, function () {\n  return [useMapEvents];\n});\n_c = LocationPicker;\nconst ReportForm = () => {\n  _s2();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [priorities, setPriorities] = useState([]);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [mapPosition, setMapPosition] = useState([23.8103, 90.4125]); // Dhaka, Bangladesh\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const [isAnalyzingImage, setIsAnalyzingImage] = useState(false);\n  const [aiGeneratedDescription, setAiGeneratedDescription] = useState('');\n  const [showAiDescription, setShowAiDescription] = useState(false);\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    }\n  } = useForm({\n    defaultValues: {\n      priority: 'MEDIUM'\n    }\n  });\n  useEffect(() => {\n    fetchCategories();\n    fetchPriorities();\n    getCurrentLocation();\n  }, []);\n  const fetchCategories = async () => {\n    try {\n      const response = await reportService.getCategories();\n      setCategories(response.data);\n    } catch (error) {\n      console.error('Error fetching categories:', error);\n    }\n  };\n  const fetchPriorities = async () => {\n    try {\n      const response = await reportService.getPriorities();\n      setPriorities(response.data);\n    } catch (error) {\n      console.error('Error fetching priorities:', error);\n    }\n  };\n  const getCurrentLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        setMapPosition([latitude, longitude]);\n        setSelectedLocation({\n          lat: latitude,\n          lng: longitude\n        });\n        setValue('latitude', latitude);\n        setValue('longitude', longitude);\n      }, error => {\n        console.error('Error getting location:', error);\n        toast.info('Please select your location on the map');\n      });\n    }\n  };\n  const handleLocationSelect = useCallback((lat, lng) => {\n    setSelectedLocation({\n      lat,\n      lng\n    });\n    setValue('latitude', lat);\n    setValue('longitude', lng);\n  }, [setValue]);\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 10 * 1024 * 1024) {\n        // 10MB limit\n        toast.error('Image size should be less than 10MB');\n        return;\n      }\n      setSelectedImage(file);\n      const reader = new FileReader();\n      reader.onload = e => {\n        setImagePreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const onSubmit = async data => {\n    if (!selectedLocation) {\n      toast.error('Please select a location on the map');\n      return;\n    }\n    setLoading(true);\n    try {\n      const reportData = {\n        ...data,\n        latitude: selectedLocation.lat,\n        longitude: selectedLocation.lng\n      };\n      await reportService.createReport(reportData, selectedImage);\n      toast.success('Report submitted successfully!');\n      navigate('/dashboard');\n    } catch (error) {\n      console.error('Error creating report:', error);\n      toast.error('Failed to submit report. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const formatEnumValue = value => {\n    return value.replace(/_/g, ' ').toLowerCase().replace(/\\b\\w/g, l => l.toUpperCase());\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"page-title mb-8\",\n        children: \"Report New Issue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        className: \"space-y-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"card-title\",\n              children: \"Issue Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"title\",\n                className: \"form-label\",\n                children: \"Issue Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"title\",\n                type: \"text\",\n                className: \"form-input\",\n                placeholder: \"Brief description of the issue\",\n                ...register('title', {\n                  required: 'Title is required',\n                  maxLength: {\n                    value: 200,\n                    message: 'Title must be less than 200 characters'\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this), errors.title && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-error\",\n                children: errors.title.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"category\",\n                  className: \"form-label\",\n                  children: \"Category *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"category\",\n                  className: \"form-select\",\n                  ...register('category', {\n                    required: 'Category is required'\n                  }),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select a category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 21\n                  }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: category,\n                    children: formatEnumValue(category)\n                  }, category, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 19\n                }, this), errors.category && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-error\",\n                  children: errors.category.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"priority\",\n                  className: \"form-label\",\n                  children: \"Priority\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"priority\",\n                  className: \"form-select\",\n                  ...register('priority'),\n                  children: priorities.map(priority => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: priority,\n                    children: formatEnumValue(priority)\n                  }, priority, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"description\",\n                className: \"form-label\",\n                children: \"Description *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                id: \"description\",\n                className: \"form-textarea\",\n                placeholder: \"Provide detailed information about the issue...\",\n                rows: 5,\n                ...register('description', {\n                  required: 'Description is required',\n                  maxLength: {\n                    value: 2000,\n                    message: 'Description must be less than 2000 characters'\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this), errors.description && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-error\",\n                children: errors.description.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"locationAddress\",\n                className: \"form-label\",\n                children: \"Location Address (Optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"locationAddress\",\n                type: \"text\",\n                className: \"form-input\",\n                placeholder: \"e.g., Near City Hall, Main Street\",\n                ...register('locationAddress')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"card-title\",\n              children: \"Upload Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"image\",\n                className: \"form-label\",\n                children: \"Issue Photo (Optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-2 border-dashed border-gray-300 rounded-lg p-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Upload, {\n                    size: 48,\n                    className: \"mx-auto text-gray-400 mb-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"image\",\n                    className: \"btn btn-outline cursor-pointer\",\n                    children: \"Choose Image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: \"image\",\n                    type: \"file\",\n                    accept: \"image/*\",\n                    className: \"hidden\",\n                    onChange: handleImageChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500 mt-2\",\n                    children: \"PNG, JPG, GIF up to 10MB\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imagePreview,\n                  alt: \"Preview\",\n                  className: \"w-full h-64 object-cover rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"card-title\",\n              children: \"Select Location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Click on the map to pinpoint the exact location of the issue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"map-container mb-4\",\n              children: /*#__PURE__*/_jsxDEV(MapContainer, {\n                center: mapPosition,\n                zoom: 15,\n                style: {\n                  height: '400px',\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n                  attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n                  url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(LocationPicker, {\n                  onLocationSelect: handleLocationSelect,\n                  initialPosition: selectedLocation ? [selectedLocation.lat, selectedLocation.lng] : null\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), selectedLocation && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Selected: \", selectedLocation.lat.toFixed(6), \", \", selectedLocation.lng.toFixed(6)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"hidden\",\n              ...register('latitude')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"hidden\",\n              ...register('longitude')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"btn btn-primary\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              size: 20,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this), loading ? 'Submitting...' : 'Submit Report']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n_s2(ReportForm, \"aU7ung7GSTkUNs2RwZYV58grWis=\", false, function () {\n  return [useNavigate, useForm];\n});\n_c2 = ReportForm;\nexport default ReportForm;\nvar _c, _c2;\n$RefreshReg$(_c, \"LocationPicker\");\n$RefreshReg$(_c2, \"ReportForm\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useForm","toast","MapContainer","TileLayer","Marker","useMapEvents","L","MapPin","Upload","Save","Sparkles","Edit3","reportService","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","LocationPicker","onLocationSelect","initialPosition","_s","position","setPosition","map","click","e","newPosition","latlng","lat","lng","setView","getZoom","fileName","_jsxFileName","lineNumber","columnNumber","_c","ReportForm","_s2","navigate","loading","setLoading","categories","setCategories","priorities","setPriorities","selectedImage","setSelectedImage","imagePreview","setImagePreview","mapPosition","setMapPosition","selectedLocation","setSelectedLocation","isAnalyzingImage","setIsAnalyzingImage","aiGeneratedDescription","setAiGeneratedDescription","showAiDescription","setShowAiDescription","register","handleSubmit","setValue","formState","errors","defaultValues","priority","fetchCategories","fetchPriorities","getCurrentLocation","response","getCategories","data","error","console","getPriorities","navigator","geolocation","getCurrentPosition","latitude","longitude","coords","info","handleLocationSelect","handleImageChange","file","target","files","size","reader","FileReader","onload","result","readAsDataURL","onSubmit","reportData","createReport","success","formatEnumValue","value","replace","toLowerCase","l","toUpperCase","className","children","htmlFor","id","type","placeholder","required","maxLength","message","title","category","rows","description","accept","onChange","src","alt","center","zoom","style","height","width","attribution","url","toFixed","disabled","_c2","$RefreshReg$"],"sources":["E:/Competition/Hackathon/Fixpoint_javafest/FixPoint/frontend/src/pages/ReportForm.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport { MapPin, Upload, Save, Sparkles, Edit3 } from 'lucide-react';\r\nimport { reportService } from '../services/reportService';\r\n\r\n// Fix for default markers in react-leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\nconst LocationPicker = ({ onLocationSelect, initialPosition }) => {\r\n  const [position, setPosition] = useState(initialPosition);\r\n\r\n  const map = useMapEvents({\r\n    click(e) {\r\n      const newPosition = [e.latlng.lat, e.latlng.lng];\r\n      setPosition(newPosition);\r\n      onLocationSelect(e.latlng.lat, e.latlng.lng);\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (position && map) {\r\n      map.setView(position, map.getZoom());\r\n    }\r\n  }, [position, map]);\r\n\r\n  return position ? <Marker position={position} /> : null;\r\n};\r\n\r\nconst ReportForm = () => {\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [priorities, setPriorities] = useState([]);\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [mapPosition, setMapPosition] = useState([23.8103, 90.4125]); // Dhaka, Bangladesh\r\n  const [selectedLocation, setSelectedLocation] = useState(null);\r\n  const [isAnalyzingImage, setIsAnalyzingImage] = useState(false);\r\n  const [aiGeneratedDescription, setAiGeneratedDescription] = useState('');\r\n  const [showAiDescription, setShowAiDescription] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setValue,\r\n    formState: { errors }\r\n  } = useForm({\r\n    defaultValues: {\r\n      priority: 'MEDIUM'\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n    fetchPriorities();\r\n    getCurrentLocation();\r\n  }, []);\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const response = await reportService.getCategories();\r\n      setCategories(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching categories:', error);\r\n    }\r\n  };\r\n\r\n  const fetchPriorities = async () => {\r\n    try {\r\n      const response = await reportService.getPriorities();\r\n      setPriorities(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching priorities:', error);\r\n    }\r\n  };\r\n\r\n  const getCurrentLocation = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const { latitude, longitude } = position.coords;\r\n          setMapPosition([latitude, longitude]);\r\n          setSelectedLocation({ lat: latitude, lng: longitude });\r\n          setValue('latitude', latitude);\r\n          setValue('longitude', longitude);\r\n        },\r\n        (error) => {\r\n          console.error('Error getting location:', error);\r\n          toast.info('Please select your location on the map');\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleLocationSelect = useCallback((lat, lng) => {\r\n    setSelectedLocation({ lat, lng });\r\n    setValue('latitude', lat);\r\n    setValue('longitude', lng);\r\n  }, [setValue]);\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      if (file.size > 10 * 1024 * 1024) { // 10MB limit\r\n        toast.error('Image size should be less than 10MB');\r\n        return;\r\n      }\r\n\r\n      setSelectedImage(file);\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImagePreview(e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    if (!selectedLocation) {\r\n      toast.error('Please select a location on the map');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const reportData = {\r\n        ...data,\r\n        latitude: selectedLocation.lat,\r\n        longitude: selectedLocation.lng\r\n      };\r\n\r\n      await reportService.createReport(reportData, selectedImage);\r\n      toast.success('Report submitted successfully!');\r\n      navigate('/dashboard');\r\n    } catch (error) {\r\n      console.error('Error creating report:', error);\r\n      toast.error('Failed to submit report. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatEnumValue = (value) => {\r\n    return value.replace(/_/g, ' ').toLowerCase().replace(/\\b\\w/g, l => l.toUpperCase());\r\n  };\r\n\r\n  return (\r\n    <div className=\"container py-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <h1 className=\"page-title mb-8\">Report New Issue</h1>\r\n\r\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-8\">\r\n          {/* Basic Information */}\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h2 className=\"card-title\">Issue Details</h2>\r\n            </div>\r\n            <div className=\"card-body space-y-6\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"title\" className=\"form-label\">\r\n                  Issue Title *\r\n                </label>\r\n                <input\r\n                  id=\"title\"\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  placeholder=\"Brief description of the issue\"\r\n                  {...register('title', {\r\n                    required: 'Title is required',\r\n                    maxLength: {\r\n                      value: 200,\r\n                      message: 'Title must be less than 200 characters'\r\n                    }\r\n                  })}\r\n                />\r\n                {errors.title && (\r\n                  <div className=\"form-error\">{errors.title.message}</div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"category\" className=\"form-label\">\r\n                    Category *\r\n                  </label>\r\n                  <select\r\n                    id=\"category\"\r\n                    className=\"form-select\"\r\n                    {...register('category', {\r\n                      required: 'Category is required'\r\n                    })}\r\n                  >\r\n                    <option value=\"\">Select a category</option>\r\n                    {categories.map(category => (\r\n                      <option key={category} value={category}>\r\n                        {formatEnumValue(category)}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                  {errors.category && (\r\n                    <div className=\"form-error\">{errors.category.message}</div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"priority\" className=\"form-label\">\r\n                    Priority\r\n                  </label>\r\n                  <select\r\n                    id=\"priority\"\r\n                    className=\"form-select\"\r\n                    {...register('priority')}\r\n                  >\r\n                    {priorities.map(priority => (\r\n                      <option key={priority} value={priority}>\r\n                        {formatEnumValue(priority)}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"description\" className=\"form-label\">\r\n                  Description *\r\n                </label>\r\n                <textarea\r\n                  id=\"description\"\r\n                  className=\"form-textarea\"\r\n                  placeholder=\"Provide detailed information about the issue...\"\r\n                  rows={5}\r\n                  {...register('description', {\r\n                    required: 'Description is required',\r\n                    maxLength: {\r\n                      value: 2000,\r\n                      message: 'Description must be less than 2000 characters'\r\n                    }\r\n                  })}\r\n                />\r\n                {errors.description && (\r\n                  <div className=\"form-error\">{errors.description.message}</div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"locationAddress\" className=\"form-label\">\r\n                  Location Address (Optional)\r\n                </label>\r\n                <input\r\n                  id=\"locationAddress\"\r\n                  type=\"text\"\r\n                  className=\"form-input\"\r\n                  placeholder=\"e.g., Near City Hall, Main Street\"\r\n                  {...register('locationAddress')}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Image Upload */}\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h2 className=\"card-title\">Upload Image</h2>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"image\" className=\"form-label\">\r\n                  Issue Photo (Optional)\r\n                </label>\r\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6\">\r\n                  <div className=\"text-center\">\r\n                    <Upload size={48} className=\"mx-auto text-gray-400 mb-4\" />\r\n                    <label htmlFor=\"image\" className=\"btn btn-outline cursor-pointer\">\r\n                      Choose Image\r\n                    </label>\r\n                    <input\r\n                      id=\"image\"\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      className=\"hidden\"\r\n                      onChange={handleImageChange}\r\n                    />\r\n                    <p className=\"text-sm text-gray-500 mt-2\">\r\n                      PNG, JPG, GIF up to 10MB\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                \r\n                {imagePreview && (\r\n                  <div className=\"mt-4\">\r\n                    <img\r\n                      src={imagePreview}\r\n                      alt=\"Preview\"\r\n                      className=\"w-full h-64 object-cover rounded-lg\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Location Selection */}\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h2 className=\"card-title\">Select Location</h2>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Click on the map to pinpoint the exact location of the issue\r\n              </p>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"map-container mb-4\">\r\n                <MapContainer \r\n                  center={mapPosition} \r\n                  zoom={15} \r\n                  style={{ height: '400px', width: '100%' }}\r\n                >\r\n                  <TileLayer\r\n                    attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                  />\r\n                  <LocationPicker \r\n                    onLocationSelect={handleLocationSelect}\r\n                    initialPosition={selectedLocation ? [selectedLocation.lat, selectedLocation.lng] : null}\r\n                  />\r\n                </MapContainer>\r\n              </div>\r\n              \r\n              {selectedLocation && (\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                  <MapPin size={16} />\r\n                  <span>\r\n                    Selected: {selectedLocation.lat.toFixed(6)}, {selectedLocation.lng.toFixed(6)}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              \r\n              <input type=\"hidden\" {...register('latitude')} />\r\n              <input type=\"hidden\" {...register('longitude')} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"btn btn-primary\"\r\n            >\r\n              <Save size={20} className=\"mr-2\" />\r\n              {loading ? 'Submitting...' : 'Submit Report'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}